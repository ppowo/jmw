projects:
  sinfomar: # multiple repos in one directory, domain mode WildFly
    base_path: ~/Work/SinfomarSuite

    # Build settings
    default_profile: TEST
    available_profiles: [TEST, PROD]
    profile_overrides:
      TEST: [TEST, '!PROD']
      PROD: [PROD, '!TEST']
    skip_tests: true

    wildfly_root: ~/ApplicationServer/wildfly-sinfomar
    wildfly_mode: domain
    server_group: other-server-group

    # Remote deployment (instructions only)
    remote:
      host: TEST-SINFOMAR-TRIESTE-111
      user: root
      wildfly_path: /opt/wildfly
      restart_cmd: service wildfly stop && service wildfly start

    # Module mappings (path for global modules, "" for normal deployment)
    modules:
      # Global modules
      AllWebServiceClient: modules/ejbpcs/main
      EJBPcs: modules/ejbpcs/main
      EJBPcsRemote: modules/ejbpcs/main

      # Normal deployments
      # Add your normal modules here with empty string
      storiamezzo : ""
      trm: ""
      # PcsWeb: ""  # ignored

  mto: # single repo with multi-module Maven, standalone mode Wildfly
    base_path: ~/Work/mto-suite

    available_profiles: []
    profile_overrides:
      "": ['!TEST', '!PROD']

    skip_tests: true

    wildfly_root: ~/ApplicationServer/wildfly-mto-3_0
    wildfly_mode: standalone

    # Client-specific configurations for remote deployment
    # Use --client parameter to select which remote to deploy to
    clients:
      metro:
        remote:
          host: TEST-MTO-METROCARGO-101
          user: root
          wildfly_path: /wildfly
          restart_cmd: service wildfly stop && service wildfly start
      psa:
        remote:
          host: TEST-MTO-PSA-102
          user: root
          wildfly_path: /wildfly
          restart_cmd: systemctl restart wildfly-standard

    # Default client (can be overridden with --client flag)
    default_client: psa

    # Module mappings (path for global modules, "" for normal deployment)
    modules:
      # Global modules
      EJBMtoRemote: modules/ejbmto/main

      # Normal deployments
      SinfoMto: ""
      EJBMto: ""

restart_rules:
  global_module: true
  patterns:
    - match: "entities/.*\\.java"
      reason: "Entity class modification"
      severity: required
    - match: "hibernate\\.cfg\\.xml"
      reason: "Hibernate configuration change"
      severity: required
    - match: "EJB.*\\.java"
      reason: "EJB implementation change"
      severity: recommended